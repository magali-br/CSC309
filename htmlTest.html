<!DOCTYPE html>
<html><head><title>Space Invaders</title>
<link rel="stylesheet" href="htmlTest.css">
<meta charset="utf-8">
</head>

<body>

<p>Are you really really ready?</p>
<button type="button" onclick="drawCanvas()">WHEEE</button>

	<canvas id="littleCanvas" width="600" height="600" style="border: 1px solid purple;" onkeydown="move()">
	</canvas>

<p></p>
<script type="text/javascript">
var intervalVar;
var fallingObjectHeight = 0;
var defenderX = 0;
var defenderY = 0;
var defenderWidth = 40;
var defenderHeight = 10;

function drawCanvas()
{
	/*if (y == canvas.height) {
		y = 0;
	}*/

	var canvas = document.getElementById("littleCanvas");
	var ctx = canvas.getContext("2d");
	ctx.fillStyle="blue";
	ctx.fillRect(0,0,canvas.width,canvas.height);
	ctx.fillStyle="red";
	defenderX = canvas.width / 2;
	defenderY = canvas.height - 15;
	ctx.fillRect(defenderX, defenderY, defenderWidth, defenderHeight);
	canvas.addEventListener("keydown", move, true);
	window.addEventListener("keydown", move, true);

	
	intervalVar = window.setInterval(function(){drawPoint()},100)
	//window.setInterval(function(){alert("Hello")},3000);
	
	//ctx.fillStyle="red";
	//ctx.fillRect(20,20,10,10);
	return 0;
}

function drawPoint()
{
	var canvas = document.getElementById("littleCanvas");
	var ctx = canvas.getContext("2d");

	ctx.fillStyle="blue";
	ctx.fillRect(100,fallingObjectHeight,10,10);

	fallingObjectHeight += 10;

	ctx.fillStyle="yellow";
	ctx.fillRect(100,fallingObjectHeight,10,10);

	if (fallingObjectHeight >= canvas.height) {
		window.clearInterval(intervalVar);
		alert("You die!");
		fallingObjectHeight = 0;
	}

	//check pixel colours?? if red & hits it - safe! (javanoid)

}

function move(pressedKey) {

	//alert(pressedKey.keyCode + "   " + window.event);
	//keycodes http://unixpapa.com/js/key.html
	var canvas = document.getElementById("littleCanvas");
	var ctx = canvas.getContext("2d");
	ctx.fillStyle="blue";
	ctx.fillRect(defenderX, defenderY, defenderWidth, defenderHeight);

	defenderX -= 10;

	ctx.fillStyle="red";
	ctx.fillRect(defenderX, defenderY, defenderWidth, defenderHeight);
}


function keyPressed(e)
{
	var canvas=document.getElementById("gameCanvas");
	var context=canvas.getContext("2d");


	var img = new Image();

	if ((e.keyCode == 37) && (moveX >= 5))  {
		moveX -= 5;
	} else if ((e.keyCode == 39) && (moveX <= (canvas.width - 43))) {
		moveX += 5;
	} else if ((e.keyCode == 38) && (moveY >= 5))  {
		moveY -= 5;
	} else if ((e.keyCode == 40) && (moveY <= canvas.height - 42)) {
		moveY += 5;
	} else if (e.keyCode == 38) {
		addMissile();
	} else {
		return;
	}
	drawBackground();
	img.onload = function() {
		context.drawImage(img, moveX, moveY, 40, 40);
	}

	img.src = "m1.png";

}

</script>

</body>
</html>